<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="scripts/jquery.js"></script>
    <script src="scripts/jquery.mobile-1.4.4.js"></script>
    <link href="css/jquery.mobile-1.4.4.css" rel="stylesheet" />
    <script type="text/javascript" charset="utf-8" src="cordova.js"></script>
</head>
<body>
    <div data-role="page" data-theme="d" id="pageIndex">
        <div data-role="header">
            <a href="#" data-icon="back" data-transition="slide" data-rel="back" data-iconpos="notext"></a>
            <h2>
                手机联系人
            </h2>
        </div>
        <div data-role="content" data-theme="none">
            <ul data-role="listview" data-autodividers="true" data-inset="true" id="listviewContactList">
                
            </ul>
        </div>
    </div>
    <script type="text/javascript">

        window.onload = function () {
            $("#listviewContactList").append('<li><a href="index.html"><h2>ASDF</h2><p>13484918458</p></a></li>');
            $("#listviewContactList").append('<li><a href="index.html"><h2>QWER</h2><p>13484918458</p></a></li>');
            $("#listviewContactList").append('<li><a href="index.html"><h2>ZDED</h2><p>13484918458</p></a></li>');
            $("#listviewContactList").append('<li><a href="index.html"><h2>AFED</h2><p>13484918458</p></a></li>');

            $("#listviewContactList").listview("refresh");
        }
        document.addEventListener("deviceready", onDeviceReady, false);

        // device APIs are available
        //
        function onDeviceReady() {
            var options = new ContactFindOptions();
            options.filter = "";
            options.multiple = true;
            var filter = ["displayName", "phoneNumbers"];
            navigator.contacts.find(filter, onSuccess, onError, options);
        }

        function onSuccess(contacts) {
            // display the address information for all contacts
            for (var i = 0; i < contacts.length; i++) {
                try{
                    $("#listviewContactList").append('<li><a href="index.html"><h2>' + contacts[i].displayName + '</h2>');
                    for (var j = 0; j < contacts[i].phoneNumbers.length; j++) {
                        if (contacts[i].phoneNumbers[j] && contacts[i].phoneNumbers[j].value &&  contacts[i].phoneNumbers[j].value != "")
                        $("#listviewContactList").append("<p>" + contacts[i].phoneNumbers[j].value + "</p>");
                    }

                    $("#listviewContactList").append("</a></li>");
                }
                catch(e)
                {

                }
                
            }

            $("#listviewContactList").listview("refresh");
        }

        function onError(contactError) {
            alert('onError!');
        }
    </script>
</body>
</html>
